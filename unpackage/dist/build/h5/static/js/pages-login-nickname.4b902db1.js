(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-nickname"],{"0ec4":function(t,e,n){"use strict";n.r(e);var a=n("aefa"),i=n("6f9e");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("df9c");var r,c=n("f0c5"),s=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"96526f3c",null,!1,a["a"],r);e["default"]=s.exports},"6f56":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),o=n("d8db"),r={data:function(){return{action:o.baseUrl+"/upload",nickname:"",head_portrait:"",isClick:!1}},onLoad:function(){this.nickname=this.$store.state.info.nickname,this.head_portrait=this.$store.state.info.head_portrait},methods:{upload:function(){var t=this;uni.chooseImage({count:1,success:function(e){var n=e.tempFilePaths;t.head_portrait=n[0],t.isClick=!0,console.log(e),console.log(t.head_portrait)}})},userEdit:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={nickname:e.nickname},t&&(a.head_portrait=t),n.next=4,e.$u.api.userEdit(a);case 4:n.sent,e.$store.commit("changeNickname",a),e.$u.toast("修改成功"),setTimeout((function(){uni.switchTab({url:"/pages/tabbar/my"})}),1e3);case 8:case"end":return n.stop()}}),n)})))()},uploadImage:function(){var t=this;uni.uploadFile({url:o.baseUrl+"/upload",filePath:this.head_portrait,name:"file",header:{ApiToken:uni.getStorageSync("token")},success:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(n){var a,i,o,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=JSON.parse(n.data),i=a.code,o=a.data,r=a.msg,console.log(o),0==i?(c=o.src,t.userEdit(c)):vm.$u.toast(r);case 3:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),fail:function(t){console.log("err",t)}})},onSubmit:function(){this.isClick?this.uploadImage():this.userEdit()}}};e.default=r},"6f9e":function(t,e,n){"use strict";n.r(e);var a=n("6f56"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},aefa:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni_box nickname"},[n("v-uni-view",{staticClass:"avatar"},[n("v-uni-view",[t._v("选择头像")]),n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"photo",attrs:{src:t.head_portrait}})],1)],1),n("v-uni-view",{staticClass:"title"},[t._v("请输入您的昵称")]),n("v-uni-input",{staticClass:"input",attrs:{placeholder:"请输入您要修改的昵称"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),n("v-uni-view",{staticClass:"footer"},[n("v-uni-view",{staticClass:"footer_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)},o=[]},b07c:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"*[data-v-96526f3c]{font-family:Source Han Sans CN-Medium,Source Han Sans CN}.uni_box[data-v-96526f3c]{width:100vw;min-height:100%;background:#f7f8fa}uni-image[data-v-96526f3c]{pointer-events:none}.test[data-v-96526f3c]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.nickname[data-v-96526f3c]{padding:0 %?32?% %?120?% %?32?%;box-sizing:border-box;overflow:hidden;position:relative}.nickname .avatar[data-v-96526f3c]{margin-top:%?40?%;display:flex;justify-content:space-between;align-items:center}.nickname .avatar .photo[data-v-96526f3c]{width:%?100?%;height:%?100?%;border-radius:50%}.nickname .title[data-v-96526f3c]{color:#000;font-size:%?28?%;font-weight:400;margin-top:%?40?%;margin-bottom:%?15?%}.nickname .input[data-v-96526f3c]{width:100%;height:%?80?%;text-indent:%?28?%;border-radius:8px;border:1px solid #eee}.nickname .footer[data-v-96526f3c]{width:100%;height:%?120?%;padding:%?0?% %?32?%;box-sizing:border-box;background:hsla(0,0%,100%,.9);-webkit-backdrop-filter:blur(%?24?%);backdrop-filter:blur(%?24?%);display:flex;justify-content:flex-end;align-items:center;position:absolute;left:0;bottom:0;z-index:2}.nickname .footer .footer_btn[data-v-96526f3c]{width:%?184?%;height:%?80?%;line-height:%?80?%;text-align:center;color:#00cace;font-size:%?28?%;border-radius:%?16?%;background:#000}",""]),t.exports=e},df9c:function(t,e,n){"use strict";var a=n("f95d"),i=n.n(a);i.a},f95d:function(t,e,n){var a=n("b07c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("6bd19466",a,!0,{sourceMap:!1,shadowMode:!1})}}]);