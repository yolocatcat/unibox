(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/blindBox/blindBoxDeta"],{1507:function(t,e,n){"use strict";n.r(e);var i=n("6c74"),r=n("435b");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("2d70");var o,c=n("f0c5"),u=Object(c["a"])(r["default"],i["b"],i["c"],!1,null,"90f5c47e",null,!1,i["a"],o);e["default"]=u.exports},"2d70":function(t,e,n){"use strict";var i=n("4051"),r=n.n(i);r.a},4051:function(t,e,n){},"435b":function(t,e,n){"use strict";n.r(e);var i=n("cd7b"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"5d1c":function(t,e,n){"use strict";(function(t){n("04da");i(n("66fd"));var e=i(n("1507"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"6c74":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uParse:function(){return Promise.all([n.e("common/vendor"),n.e("uview/components/u-parse/u-parse")]).then(n.bind(null,"366e"))}},r=function(){var t=this,e=t.$createElement;t._self._c},a=[]},cd7b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,i,r,a,o){try{var c=t[a](o),u=c.value}catch(s){return void n(s)}c.done?e(u):Promise.resolve(u).then(i,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function c(t){a(o,i,r,c,u,"next",t)}function u(t){a(o,i,r,c,u,"throw",t)}c(void 0)}))}}var c={data:function(){return{id:null,list:[],cover:"",name:"",stock:"",issue:"",price:"",content:"",notice:"",status:null,time:"",start_date:"",timer:null,lock_time:0,lookTimer:null,bList:[],style:{img:"width:max-width:100%;height:auto"}}},onLoad:function(t){this.id=t.id},onUnload:function(){clearTimeout(this.timer),clearInterval(this.lookTimer)},onShow:function(){this.getDeta()},onHide:function(){clearTimeout(this.timer),clearInterval(this.lookTimer)},methods:{backTo:function(e){t.navigateBack()},getDeta:function(){var t=this;return o(i.default.mark((function e(){var n,r,a,o,c,u,s;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.blindDetails({id:t.id});case 2:n=e.sent,r=n.lock_time,a=n.blind_box,o=n.blind_box_product,c=n.extract_old,u=n.setting_buy,s=a,t.cover=s.cover,t.name=s.name,t.stock=s.stock,t.issue=s.issue_all,t.price=s.price,t.content=s.content,t.notice=null===u||void 0===u?void 0:u.content,t.status=s.status,t.start_date=s.start_date,t.lock_time=r,t.list=o,t.bList=c,t.handerTime(),t.lockTimeFn();case 23:case"end":return e.stop()}}),e)})))()},lockTimeFn:function(){var t=this,e=this.lock_time;e>0&&(this.lookTimer=setInterval((function(){t.lock_time--,t.lock_time<0&&(t.status=1,clearInterval(t.lookTimer))}),1e3))},handerTime:function(){var t=this.status;if(0==t){var e=(new Date).getTime(),n=this.start_date;n=new Date(n.replace(/-/g,"/"));var i=new Date(n).getTime();if(e>=i)this.status=1;else{var r=i-e,a=parseInt(r/1e3/60/60);a=a<10?"0"+a:a;var o=parseInt(r/1e3/60%60);o=o<10?"0"+o:o;var c=parseInt(r/1e3%60);c=c<10?"0"+c:c,this.time="".concat(a,":").concat(o,":").concat(c)}this.timer=setTimeout(this.handerTime,1e3)}else clearTimeout(this.timer)},lockList:function(){var e=this;return o(i.default.mark((function n(){var r,a,o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.lock_time>0)){n.next=3;break}return e.$u.toast("上笔订单未支付"),n.abrupt("return");case 3:return n.next=5,e.$u.api.orderPlace({id:e.id,from:"blindbox"});case 5:r=n.sent,a=r.id,o="/pages/setting/lockList?type=2&id=".concat(e.id,"&orderId=").concat(a),t.redirectTo({url:o});case 9:case"end":return n.stop()}}),n)})))()},routerTo:function(e){t.navigateTo({url:e})}}};e.default=c}).call(this,n("543d")["default"])}},[["5d1c","common/runtime","common/vendor"]]]);