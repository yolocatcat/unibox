(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/market/marketBuy"],{"1bf7":function(t,e,n){"use strict";(function(t){n("04da");r(n("66fd"));var e=r(n("f1d9"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"38c7":function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.checked=!t.checked},t.e1=function(e){t.checked=!t.checked})},i=[]},"3c5b":function(t,e,n){"use strict";var r=n("7b73"),a=n.n(r);a.a},"3cf6":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,a,i,u){try{var c=t[i](u),o=c.value}catch(s){return void n(s)}c.done?e(o):Promise.resolve(o).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var u=t.apply(e,n);function c(t){i(u,r,a,c,o,"next",t)}function o(t){i(u,r,a,c,o,"throw",t)}c(void 0)}))}}var c={data:function(){return{type:null,checked:!1,nameKey:"",number:1,cover:"",name:"",price:"",id:null,payList:[],active:1,pay_password:"",status:0,statusText:"",end_pay_time:0,time:"00:00:00",timer:null}},onLoad:function(e){this.type=e.type,this.id=e.id;var n=1==e.type?"购买藏品":"购买盲盒";this.nameKey=1==e.type?"藏品名称":"盲盒名称",t.setNavigationBarTitle({title:n})},onUnload:function(){clearTimeout(this.timer)},onShow:function(){this.orderInfo()},onHide:function(){clearTimeout(this.timer)},methods:{backTo:function(e){t.navigateBack()},handerTime:function(){var t=this.end_pay_time;if(0!=t){this.timer=setTimeout(this.handerTime,1e3);this.status;var e=parseInt((new Date).getTime()/1e3);if(e>=t)clearTimeout(this.timer),this.orderInfo();else{var n=t-e,r=parseInt(n/60/60%24);r=r<10?"0"+r:r;var a=parseInt(n/60%60);a=a<10?"0"+a:a;var i=parseInt(n%60);i=i<10?"0"+i:i,this.time="".concat(r,":").concat(a,":").concat(i)}}},orderInfo:function(){var t=this;return u(r.default.mark((function e(){var n,a,i,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.orderInfo({id:t.id});case 2:n=e.sent,a=n.order,i=n.order_pay,u=1==t.type?a.product:a.blindbox,t.cover=u.cover,t.name=u.name,t.price=u.price,t.status=a.pay_status,t.statusText=a.pay_status_name,t.payList=i,0==t.status&&t.handerTime();case 13:case"end":return e.stop()}}),e)})))()},changeActive:function(t){this.active=t,this.pay_password=""},submitPayment:function(){var t=this;return u(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.checked){e.next=3;break}return t.$u.toast("请先阅读《商品购买和转售须知》"),e.abrupt("return",!1);case 3:return e.next=5,t.$u.api.orderSellBuy({id:t.id,pay_mode:t.active,pay_password:t.pay_password});case 5:e.sent,clearTimeout(t.timer),t.getProductInfo();case 8:case"end":return e.stop()}}),e)})))()},cancelPayment:function(){var e=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0==e.status){n.next=3;break}return e.$u.toast("该订单已完成,无法取消"),n.abrupt("return");case 3:return n.next=5,e.$u.api.orderSellCancel({id:e.id});case 5:n.sent,e.$u.toast("取消订单成功"),setTimeout((function(){t.navigateBack()}),1e3);case 8:case"end":return n.stop()}}),n)})))()},routerTo:function(e){t.navigateTo({url:e})}}};e.default=c}).call(this,n("543d")["default"])},"7b73":function(t,e,n){},"9f94":function(t,e,n){"use strict";n.r(e);var r=n("3cf6"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},f1d9:function(t,e,n){"use strict";n.r(e);var r=n("38c7"),a=n("9f94");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("3c5b");var u,c=n("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"1c17ee74",null,!1,r["a"],u);e["default"]=o.exports}},[["1bf7","common/runtime","common/vendor"]]]);